{include="header"}

<script type="text/javascript" src="plugins/SAT/view/jscolor/jscolor.js"></script>
<script type="text/javascript">
   function eliminar_estado(id)
   {
      if( confirm("¿Realmente desea eliminar el estado "+id+"?") )
         window.location.href = '{$fsc->url()}&delete_estado='+id+'#estados';
   }
   $(document).ready(function () {
      if(window.location.hash.substring(1) == 'estados')
      {
         $('#tab_opciones a[href="#estados"]').tab('show');
      }
   });
</script>

<br/>
 <form action="{$fsc->url()}" method="post" class="form">
<div class="container">
   <div class="row">
      <div class="col-sm-4">
         <a href="{$fsc->url()}" class="btn btn-sm btn-default" title="Recargar la página">
            <span class="glyphicon glyphicon-refresh"></span>
         </a>
         <a href="index.php?page=ventas_servicios" class="btn btn-sm btn-default">
            <span class="glyphicon glyphicon-arrow-left"></span> &nbsp; Atrás
         </a>
      </div>
      <div class="col-sm-4 text-right">
         <h2 style="margin-top: 0px;">Opciones</h2>
      </div>
      <div class="col-sm-4 text-right">
                  <button class="btn btn-sm btn-primary" type="submit" onclick="this.disabled=true; this.form.submit();">
                     <span class="glyphicon glyphicon-floppy-disk"></span> &nbsp; Guardar
                  </button>
      </div>
   </div>
   <div class="row">
      <div class="col-sm-12">
         <ul id="tab_opciones" class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
               <a href="#general" aria-controls="general" role="tab" data-toggle="tab">
                  <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> &nbsp; General
               </a>
            </li>
            <li role="presentation">
               <a href="#requeridos" aria-controls="requeridos" role="tab" data-toggle="tab">
                  <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> &nbsp; Requeridos
               </a>
            </li>
            <li role="presentation">
               <a href="#estados" aria-controls="estados" role="tab" data-toggle="tab">
                  <span class="glyphicon glyphicon-tag" aria-hidden="true"></span> &nbsp; Estados
               </a>
            </li>
         </ul>
      </div>
   </div>
   <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="general">
         <br/>
        
            <input type="hidden" name="servicios_setup" value="TRUE"/>
            <div class="row">
               <div class="col-sm-3">
                 <div class="form-group">
                     <label>
                        <input type="text" name="diasfin" value="{$fsc->servicios_setup['servicios_diasfin']}" class="form-control" autocomplete="off"/>
                        Días estimados para la finalización de los servicios.
                     </label>
                  </div>
               </div>  
            </div>
            <div class="row">
               <div class="col-sm-12">
                  <div class="form-group">
                     Condiciones:
                     <textarea name="condiciones" class="form-control" rows="10">{$fsc->servicios_setup['servicios_condiciones']}</textarea>
                  </div>
               </div>
            </div>
           
        
      </div>
      <div role="tabpanel" class="tab-pane" id="requeridos">
         <div class="row bg-info">
             <div class="col-sm-12">
           Aquí podrás configurar que valores quieres que sean requeridos para poder guardar un servicio.
            </div>
         </div>
         <div class="row">
          <div class="col-sm-2">
                  <div class="checkbox">
                     <label>
                        <input type="checkbox" name="servicios_material" value="TRUE"{if="$fsc->servicios_setup['servicios_material']"} checked="checked"{/if}/>
                        Material
                     </label>
                  </div>
          </div>
          <div class="col-sm-2">
                  <div class="checkbox">
                     <label>
                        <input type="checkbox" name="servicios_material_estado" value="TRUE"{if="$fsc->servicios_setup['servicios_material_estado']"} checked="checked"{/if}/>
                        Estado del material
                     </label>
                  </div>
          </div>
          <div class="col-sm-2">
                  <div class="checkbox">
                     <label>
                        <input type="checkbox" name="servicios_accesorios" value="TRUE"{if="$fsc->servicios_setup['servicios_accesorios']"} checked="checked"{/if}/>
                        Accesorios
                     </label>
                  </div>
          </div>
          <div class="col-sm-2">
                  <div class="checkbox">
                     <label>
                        <input type="checkbox" name="servicios_descripcion" value="TRUE"{if="$fsc->servicios_setup['servicios_descripcion']"} checked="checked"{/if}/>
                        Descripción
                     </label>
                  </div>
          </div>
          <div class="col-sm-2">
                  <div class="checkbox">
                     <label>
                        <input type="checkbox" name="servicios_solucion" value="TRUE"{if="$fsc->servicios_setup['servicios_solucion']"} checked="checked"{/if}/>
                        Solución
                     </label>
                  </div>
          </div>
          <div class="col-sm-2">
                  <div class="checkbox">
                     <label>
                        <input type="checkbox" name="servicios_fechafin" value="TRUE"{if="$fsc->servicios_setup['servicios_fechafin']"} checked="checked"{/if}/>
                        Fecha finalización
                     </label>
                  </div>
          </div>
         </div>   
      </div>  
       
       
       
       
    </form>
      <div role="tabpanel" class="tab-pane" id="estados">
         <div class="table-responsive">
            <table class="table">
               <thead>
                  <tr>
                     <th class="text-left">Estado</th>
                     <th class="text-left">Descripción</th>
                     <th class="text-left">Color</th>
                     <th class="text-center">¿Activo?</th>
                     <th class="text-right">Acciones</th>
                  </tr>
               </thead>
               {loop="$fsc->estado->all()"}
               <form action="{$fsc->url()}#estados" method="post" class="form">
                  <input type="hidden" name="id_estado" value="{$value->id}"/>
                  <tr>
                     <td><div class="form-control">{$value->id}</div></td>
                     <td><input type="text" name="descripcion" value="{$value->descripcion}" class="form-control" autocomplete="off"/></td>
                     <td><input type="text" name="color" value="{$value->color}" class="form-control color" autocomplete="off" maxlength="6"/></td>
                     <td class="text-center">
                        <div class="checkbox">
                           <label>
                              <input type="checkbox" name="activo" value="TRUE"{if="$value->activo"} checked="checked"{/if}>
                           </label>
                        </div>
                     </td>
                     <td class="text-right">
                        <div class="btn-group">
                           {if="$fsc->allow_delete"}
                           <a class="btn btn-sm btn-danger" href="#" onclick="eliminar_estado('{$value->id}')" title="Eliminar">
                              <span class="glyphicon glyphicon-trash"></span>
                           </a>
                           {/if}
                           <button type="submit" class="btn btn-sm btn-primary" onclick="this.disabled = true;this.form.submit();" title="Guardar">
                              <span class="glyphicon glyphicon-floppy-disk"></span>
                           </button>
                        </div>
                     </td>
                  </tr>
               </form>
               {/loop}
               <form action="{$fsc->url()}#estados" method="post" class="form">
                  <tr class="bg-info">
                     <td><input type="text" name="id_estado" value="{$fsc->estado->get_nuevo_id()}" class="form-control" autocomplete="off"/></td>
                     <td><input type="text" name="descripcion" value="" class="form-control" autocomplete="off"/></td>
                     <td><input type="text" name="color" value="FFFFFF" class="form-control color" autocomplete="off" maxlength="6"/></td>
                     <td class="text-center">
                        <div class="checkbox">
                           <label>
                              <input type="checkbox" name="activo" value="TRUE" checked="checked">
                           </label>
                        </div>
                     </td>
                     <td class="text-right">
                        <div class="btn-group">
                           <button type="submit" class="btn btn-sm btn-primary" onclick="this.disabled = true;this.form.submit();" title="Guardar">
                              <span class="glyphicon glyphicon-floppy-disk"></span>
                           </button>
                        </div>
                     </td>
                  </tr>
               </form>
            </table>
         </div>
      </div>
   </div>
</div>

{include="footer"}